<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Water Pipe Simulation</title>
<style>
  body{
    overflow: hidden;
    margin: 0;
  }
</style>
</head>
<body>

<script type="module">
    import * as THREE from "https://cdn.skypack.dev/three@0.133.1";
    import {
      OrbitControls
    } from "https://cdn.skypack.dev/three@0.133.1/examples/jsm/controls/OrbitControls.js";
    
    let scene = new THREE.Scene();
    let camera = new THREE.PerspectiveCamera(60, innerWidth / innerHeight, 1, 1000);
    camera.position.set(20, 0, 10);
    camera.lookAt(scene.position);
    let renderer = new THREE.WebGLRenderer({
      antialias: true
    });
    renderer.setSize(innerWidth, innerHeight);
    renderer.setClearColor(0x404040);
    document.body.appendChild(renderer.domElement);
    
    let controls = new OrbitControls(camera, renderer.domElement);
    
    let light = new THREE.DirectionalLight(0xffffff, 1);
    light.position.setScalar(1);
    scene.add(light, new THREE.AmbientLight(0xffffff, 0.5));
    
    let r = 1, R = 1.25;
    
    // pipe
    let pipeShape = new THREE.Shape();
    pipeShape.absarc(0, 0, R, 0, Math.PI * 2);
    pipeShape.holes.push(new THREE.Path().absarc(0, 0, r, 0, Math.PI * 2, true));
    let pipeGeometry = new THREE.ExtrudeGeometry(pipeShape, {
        curveSegments: 100,
        depth: 10,
        bevelEnabled: false
    });
    pipeGeometry.center();
    let pipeMaterial = new THREE.MeshLambertMaterial({color: "green"});
    let pipe = new THREE.Mesh(pipeGeometry, pipeMaterial);
    scene.add(pipe);
    
    
    window.addEventListener("resize", onResize);
    
    renderer.setAnimationLoop(_ => {
      renderer.render(scene, camera);
    })
    
    function onResize(event) {
      camera.aspect = innerWidth / innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(innerWidth, innerHeight);
    }
    
    </script>
    </body>
    </html>